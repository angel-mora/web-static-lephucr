---
title: Use AASM State Methods
tags: []
created: '2025-07-19'
updated: '2025-07-19'
summary: "\U0001F64B **You:**  direct assignment of AASM column has been disabled
  (see AASM configuration for this class) (AASM::NoDirectAssignmentError)"
draft: false
---

# Use AASM State Methods

## ðŸ§  Full Chat

ðŸ™‹ **You:**

direct assignment of AASM column has been disabled (see AASM configuration for this class) (AASM::NoDirectAssignmentError)

---

ðŸ¤– **Assistant:**

The error message you're encountering, `direct assignment of AASM column has been disabled (see AASM configuration for this class) (AASM::NoDirectAssignmentError)`, is related to the AASM (Acts As State Machine) gem in Ruby. AASM is a library designed to add state machines to Ruby classes. It's commonly used in Rails applications to manage the states of objects.

This specific error occurs when you try to directly assign a value to the state column of a model that uses AASM for state management. For example, if you have a model `Order` with a state machine defined on the `state` column, directly setting the state like this would raise the error:

```ruby
order.state = 'completed'
```

AASM, by default, prevents direct assignment to the state column to ensure that transitions between states follow the rules defined in your state machine. This includes running callbacks and validations that might be attached to state transitions.

### How to Resolve

1. **Use State Transition Methods:** Instead of directly assigning the state, use the methods generated by AASM to change the state. These methods are based on the transitions you've defined in your model. For example, if you have a transition to `completed` defined, you would do:

    ```ruby
    order.complete! # assuming `complete` is a defined event that transitions to `completed` state
    ```

2. **Enable Direct Assignment (Not Recommended):** If you absolutely need to directly assign states (which is generally not recommended because it bypasses the safeguards provided by AASM), you can enable direct assignment in the AASM configuration by setting the `no_direct_assignment` option to `false`:

    ```ruby
    aasm no_direct_assignment: false do
      ...
    end
    ```

    However, this should be done with caution and understanding of the implications, as it can lead to states being set without validation or callbacks being run, potentially putting your model in an inconsistent state.

### Recommended Approach

The recommended way to resolve this error is to always use the state transition methods provided by AASM. This ensures that your model's state transitions are consistent, valid, and that all necessary callbacks and validations are executed.

If you find that you frequently need to bypass these mechanisms, it might be worth revisiting your state machine's design to see if it can be better aligned with the requirements of your application.